---
id: 登录页开发和功能实现
title: 登录页开发和功能实现
sidebar_position: 2
date: 2022年10月15日
tags: [Vue3, Vite, ElementPlus, Windicss, VueRouter4, Login]
---

# 登录页开发和功能实现

## 登录页开发

使用`ElementPlus`的`Layout`布局，文档地址：[https://element-plus.gitee.io/zh-CN/component/layout.html](https://element-plus.gitee.io/zh-CN/component/layout.html)

`Windi CSS`布局`FlexBox`文档：[https://cn.windicss.org/utilities/layout/flexbox.html](https://cn.windicss.org/utilities/layout/flexbox.html)

`Positioning`控制`flex`和`grid`如何沿容器主轴定位的工具类的文档地址：[https://cn.windicss.org/utilities/layout/positioning.html#justify-content](https://cn.windicss.org/utilities/layout/positioning.html#justify-content)



>   我们要实现一个左右布局的登录页面，左边会比较宽一点，而且都是水平垂直居中效果；我们可以使用`element-plus`的`Layout`布局，使用`el-row`和`el-col`来进行实现；另外使用的样式的是使用的`windicss`的`FlexBox`的组件内容。



```javascript
<template>
    <el-row class="bg-indigo-500 min-h-screen">
        // hs
        <!-- 垂直和水平方向的居中 垂直展示 -->
        <el-col :span="16" class="flex items-center justify-center flex-col"
            >左边</el-col
        >
        <el-col
            :span="8"
            class="bg-light-50 flex items-center justify-center flex-col"
            >右边</el-col
        >
    // he
    </el-row>
</template>

```

![效果图](https://virusoss.oss-cn-shanghai.aliyuncs.com/images/20221015224543.png)

<details>
<summary>完整代码</summary>

```javascript title="login.vue"
<template>
    <el-row class="min-h-screen">
        <!-- 垂直和水平方向的居中 垂直展示 -->
        <el-col
            :span="16"
            class="bg-indigo-500 flex items-center justify-center"
        >
            <div>
                <!-- 文字加粗 文字变大 文字颜色 底部间距 -->
                <div class="font-bold text-5xl text-light-50 mb-4">
                    欢迎光临
                </div>
                <div class="text-gray-200 text-sm">
                    此站点是《vue3 + vite》实现的后台
                </div>
            </div>
        </el-col>
        <el-col
            :span="8"
            class="bg-light-50 flex items-center justify-center flex-col"
        >
            <!-- 设置字体加粗 字体大小 字体灰色加深 -->
            <h2 class="font-bold text-3xl text-gray-800">欢迎登录</h2>
            <!-- 设置左右间距2 -->
            <div
                class="
                    flex
                    items-center
                    justify-center
                    my-5
                    text-gray-300
                    space-x-2
                "
            >
                <!-- 设置高度固定值 1px -->
                <span class="h-[1px] w-16 bg-gray-200"></span>
                <span>账号密码登录</span>
                <span class="h-[1px] w-16 bg-gray-200"></span>
            </div>
            <el-form :model="form" class="w-[250px]">
                <el-form-item>
                    <el-input
                        v-model="form.username"
                        placeholder="请输入用户名"
                    />
                </el-form-item>
                <el-form-item>
                    <el-input
                        v-model="form.password"
                        placeholder="请输入密码"
                    />
                </el-form-item>
                <el-form-item>
                    <el-button
                        round
                        color="#626aef"
                        class="w-[250px]"
                        type="primary"
                        @click="onSubmit"
                        >登 录</el-button
                    >
                </el-form-item>
            </el-form>
        </el-col>
    </el-row>
</template>

<script setup>
import { reactive } from "vue";

// do not use same name with ref
const form = reactive({
    username: "",
    password: "",
});

const onSubmit = () => {
    console.log("submit!");
};
</script>

```
</details>

![](https://virusoss.oss-cn-shanghai.aliyuncs.com/images/20221015232801.png)



## 登录页响应式处理

`element-plus`响应式布局文档：[https://element-plus.gitee.io/zh-CN/component/layout.html#%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80](https://element-plus.gitee.io/zh-CN/component/layout.html#%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80)

只需要在对应的`el-col`上加代码

-   只有在大于 1200px 才会 左16 右8
-   ≥992px 显示各一半的布局

```javascript
<el-col
:lg="16"
:md="12"
class="bg-indigo-500 flex items-center justify-center"
></el-col>
<el-col
:lg="8"
:md="12"
class="bg-light-50 flex items-center justify-center flex-col"
>
    </el-col>
```



## 全局引入图标

`elem`图标文档：[https://element-plus.gitee.io/zh-CN/component/icon.html](https://element-plus.gitee.io/zh-CN/component/icon.html)

带图标的输入框文档地址：[https://element-plus.gitee.io/zh-CN/component/input.html#%E5%B8%A6%E5%9B%BE%E6%A0%87%E7%9A%84%E8%BE%93%E5%85%A5%E6%A1%86](https://element-plus.gitee.io/zh-CN/component/input.html#%E5%B8%A6%E5%9B%BE%E6%A0%87%E7%9A%84%E8%BE%93%E5%85%A5%E6%A1%86)

安装：

```bash npm2yarn
npm install @element-plus/icons-vue
```

### 图标正常使用，使用插槽形式

```javascript title="login.vue"
<el-form :model="form" class="w-[250px]">
    <el-form-item>
    <el-input
v-model="form.username"
placeholder="请输入用户名"
>
// hs
    <!-- 使用插槽 -->
    <template #prefix>
        <el-icon><User /></el-icon>
</template>
// he
</el-input>
</el-form-item>
<el-form-item>
        <el-input v-model="form.password" placeholder="请输入密码">
        // hs
            <template #prefix>
                <el-icon><Lock /></el-icon>
</template>
// he
</el-input>
</el-form-item>
<el-form-item>
                <el-button
round
color="#626aef"
class="w-[250px]"
type="primary"
@click="onSubmit"
>登 录</el-button
>
    </el-form-item>
</el-form>
</el-col>
```

如果不全局注册图标

下面还得单独引入组件

```javascript
import { User, Lock } from "@element-plus/icons-vue";
```

---

全局注册图标

```js title="main.js"
import { createApp } from 'vue'
import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'
// import './style.css'
import App from './App.vue'
import router from './router'

// hs
// 注册所有的图标
import * as ElementPlusIconsVue from '@element-plus/icons-vue'
// he

const app = createApp(App)
app.use(router)
app.use(ElementPlus)

// hs
// 关键代码开始
for (const [key, component] of Object.entries(ElementPlusIconsVue)) {
    app.component(key, component)
}
// 关键代码结束
// he
import 'virtual:windi.css'
app.mount('#app')

```

:::note
如果使用了全局注册的，那么前面单独引入的就可以去掉或者注释掉了。
:::


## 使用@apply抽离样式代码

```js title="login.vue"
<template>
    <el-row class="login-container">
        <!-- 垂直和水平方向的居中 垂直展示 -->
        <!-- 只有在大于 1200px 才会 左16 右8 -->
        <!-- ≥992px 显示各一半的布局 -->
        <el-col :lg="16" :md="12" class="left">
            <div>
                <!-- 文字加粗 文字变大 文字颜色 底部间距 -->
                <div>欢迎光临</div>
                <div>此站点是《vue3 + vite》实现的后台</div>
            </div>
        </el-col>
        <el-col :lg="8" :md="12" class="right">
            <!-- 设置字体加粗 字体大小 字体灰色加深 -->
            <h2 class="title">欢迎登录</h2>
            <!-- 设置左右间距2 -->
            <div>
                <!-- 设置高度固定值 1px -->
                <span class="line"></span>
                <span>账号密码登录</span>
                <span class="line"></span>
            </div>
            <el-form :model="form" class="w-[250px]">
                <el-form-item>
                    <el-input
                        v-model="form.username"
                        placeholder="请输入用户名"
                    >
                        <!-- 使用插槽 -->
                        <template #prefix>
                            <el-icon><User /></el-icon>
                        </template>
                    </el-input>
                </el-form-item>
                <el-form-item>
                    <el-input v-model="form.password" placeholder="请输入密码">
                        <template #prefix>
                            <el-icon><Lock /></el-icon>
                        </template>
                    </el-input>
                </el-form-item>
                <el-form-item>
                    <el-button
                        round
                        color="#626aef"
                        class="w-[250px]"
                        type="primary"
                        @click="onSubmit"
                        >登 录</el-button
                    >
                </el-form-item>
            </el-form>
        </el-col>
    </el-row>
</template>

<script setup>
import { reactive } from "vue";
// import { User, Lock } from "@element-plus/icons-vue";

// do not use same name with ref
const form = reactive({
    username: "",
    password: "",
});

const onSubmit = () => {
    console.log("submit!");
};
</script>

<style scoped>
.login-container {
    @apply min-h-screen;
}
.login-container .left {
    @apply bg-indigo-500 flex items-center justify-center;
}

.login-container .right {
    @apply bg-light-50 flex items-center justify-center flex-col;
}
.left > div > div:first-child {
    @apply font-bold text-5xl text-light-50 mb-4;
}
.left > div > div:last-child {
    @apply text-gray-200 text-sm;
}
.right .title {
    @apply font-bold text-3xl text-gray-800;
}
.right > div {
    @apply flex items-center justify-center my-5 text-gray-300 space-x-2;
}
.right .line {
    @apply h-[1px] w-16 bg-gray-200;
}
</style>

```



## setup语法糖和组合式api

`setup`文档地址：[https://cn.vuejs.org/api/composition-api-setup.html#basic-usage](https://cn.vuejs.org/api/composition-api-setup.html#basic-usage)

`<script setup>`单文件组件文档：[https://cn.vuejs.org/api/sfc-script-setup.html#basic-syntax](https://cn.vuejs.org/api/sfc-script-setup.html#basic-syntax)



响应式`api`：`ref`使用

文档地址：[https://cn.vuejs.org/api/reactivity-core.html#ref](https://cn.vuejs.org/api/reactivity-core.html#ref)

```js
<template>
    <div>后台首页</div>
    <el-button type="primary" @click="addCount">{{ count }}</el-button>
</template>

<script setup>
import { ref } from "vue";
let count = ref(1);
function addCount() {
    // alert("addCount");
    count.value++;
    console.log(count.value);
}
</script>

```

`ref`适用于一些普通类型，而`reactive`比较适用一些特殊类型



响应式`reactive`使用

```js
<template>
    <div>后台首页</div>
    <el-button type="primary" @click="addCount">{{ count }}</el-button>
    <el-button type="info" @click="addCount2">{{ form.count }}</el-button>
</template>

<script setup>
import { ref, reactive } from "vue";
let count = ref(1);
function addCount() {
    // alert("addCount");
    count.value++;
    console.log(count.value);
}

const form = reactive({
    count: 2,
});

function addCount2() {
    // 直接去操作
    form.count++;
}
</script>

```



## 登录表单验证处理

`elem Form`表单验证文档地址：[https://element-plus.gitee.io/zh-CN/component/form.html#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C](https://element-plus.gitee.io/zh-CN/component/form.html#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C)

`Form` 组件提供了表单验证的功能，只需为 `rules` 属性传入约定的验证规则，并将 `form-Item` 的 `prop` 属性设置为需要验证的特殊键值即可。

```js title="login.vue"
// hs
<el-form
ref="formRef"
:rules="rules"
// he
:model="form"
class="w-[250px]"
>
// hs
    <el-form-item prop="username">
        // he
        <el-input
v-model="form.username"
placeholder="请输入用户名"
>
    <!-- 使用插槽 -->
    <template #prefix>
        <el-icon><User /></el-icon>
</template>
</el-input>
</el-form-item>
// hs
<el-form-item prop="password">
    // he
    <el-input
type="password"
show-password
v-model="form.password"
placeholder="请输入密码"
>
    <template #prefix>
        <el-icon><Lock /></el-icon>
</template>
</el-input>
</el-form-item>
<el-form-item>
        <el-button
round
color="#626aef"
class="w-[250px]"
type="primary"
@click="onSubmit"
>登 录</el-button
>
    </el-form-item>
</el-form>
```

主要内容：

```js
<el-form
ref="formRef"
:rules="rules"
:model="form"
class="w-[250px]"
>
```

`prop`传入需要验证的键

```js
<el-form-item prop="username"></el-form-item>
<el-form-item prop="password"></el-form-item>
```

`ref="formRef"`为了拿到表单的响应式对象

```js
<script setup>
import { ref, reactive } from "vue";
// import { User, Lock } from "@element-plus/icons-vue";

// do not use same name with ref
const form = reactive({
    username: "",
    password: "",
});

// 定义登录验证规则
// 必须和上面表单属性一样
const rules = {
    // 规则可以支持多条
    // 每一条单独的都是一个对象
    username: [{ required: true, message: "用户名不能为空", trigger: "blur" }],
    password: [
        { required: true, message: "用户密码不能为空", trigger: "blur" },
    ],
};

// 让formRef变成响应式
const formRef = ref(null);

const onSubmit = () => {
    formRef.value.validate((valid) => {
        if (!valid) {
            return false;
        }
        console.log("验证通过");
    });
    console.log("submit!");
};
</script>
```

